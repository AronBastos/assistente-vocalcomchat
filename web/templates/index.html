<!DOCTYPE html>
<html>
<head>
    <title>Assistente VocalCom Web</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .response-item { border: 1px solid #ddd; padding: 10px; margin: 5px; cursor: pointer; }
        .response-item:hover { background: #f0f0f0; }
        #search { width: 100%; padding: 10px; margin-bottom: 20px; }
    </style>
</head>
<body>
    <h1>🤖 Assistente VocalCom - Versão Web</h1>
    
    <input type="text" id="search" placeholder="🔍 Buscar respostas...">
    
    <div id="responses">
        <!-- As respostas serão carregadas aqui -->
    </div>

    <script>
        // Carrega as respostas
        fetch('/api/responses')
            .then(response => response.json())
            .then(responses => {
                displayResponses(responses);
            });

        function displayResponses(responses) {
            const container = document.getElementById('responses');
            container.innerHTML = '';
            
            Object.entries(responses).forEach(([key, data]) => {
                const div = document.createElement('div');
                div.className = 'response-item';
                div.innerHTML = `
                    <strong>${key}</strong> (${data.category})
                    <br>
                    ${data.message}
                `;
                div.onclick = () => copyResponse(key);
                container.appendChild(div);
            });
        }

        function copyResponse(key) {
            fetch('/api/copy', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ key: key })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Tenta copiar para clipboard usando API moderna
                    navigator.clipboard.writeText(data.text)
                        .then(() => alert('✅ Resposta copiada!'))
                        .catch(() => {
                            // Fallback para navegadores antigos
                            prompt('Copie o texto:', data.text);
                        });
                } else {
                    alert('❌ Erro: ' + data.error);
                }
            });
        }

        // Busca em tempo real
        document.getElementById('search').addEventListener('input', function(e) {
            const query = e.target.value;
            if (query.length > 2) {
                fetch(`/api/search?q=${encodeURIComponent(query)}`)
                    .then(response => response.json())
                    .then(display)